<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline' http://fonts.googleapis.com; media-src *; img-src 'self' data:;" />

    <title>SocMan</title>

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" href="css/nativedroid2.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/jquery.mobile.min.css" />
    <link rel="stylesheet" href="vendor/waves/waves.min.css" />
    <link rel="stylesheet" href="vendor/wow/animate.css" />
    <link rel="stylesheet" type="text/css" href="css/material-design-iconic-font.min.css">
    <link rel="stylesheet" type="text/css" href="fonts/Material-Design-Iconic-Font.svg">
    <link rel="stylesheet" type="text/css" href="fonts/Material-Design-Iconic-Font.ttf">

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
    <script src="vendor/waves/waves.min.js"></script>
    <script src="vendor/wow/wow.min.js"></script>
    <script src="js/nativedroid2.js"></script>
    <script src="js/nd2settings.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/sha1.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/charenc.js"></script> 
    <script type="text/javascript" charset="utf-8" src="js/codebird.js"></script>    


        <!--Below is the code for twitter-->
        <script>
                    // GLOBAL VARS
        function login(){

        var cb = new Codebird;
        var cb          = new Codebird;
        var current_url = location.toString();
        var query       = current_url.match(/\?(.+)$/).split("&amp;");
        var parameters  = {};
        var parameter;

        navigator.notification.alert(
            'Logging In!',  // message
            'Logging',            // title
            'Done'                  // buttonName
        );                     


        cb.setConsumerKey("Zl45nPiw8U1yPQk49CDzmNBb9", "VwHEWwMudFwzCJUKTqGQidTXwiYix3mbndIKHswWdlabgTU4uG");

        for (var i = 0; i < query.length; i++) {
            parameter = query[i].split("=");
            if (parameter.length === 1) {
                parameter[1] = "";
            }
            parameters[decodeURIComponent(parameter[0])] = decodeURIComponent(parameter[1]);
        }

        // check if oauth_verifier is set
        if (typeof parameters.oauth_verifier !== "undefined") {

            // assign stored request token parameters to codebird here
            // ...
            cb.setToken(reply.oauth_token, reply.oauth_token_secret);

            cb.__call(
                "oauth_accessToken",
                {
                    oauth_verifier: parameters.oauth_verifier
                },
                function (reply, rate, err) {
                    if (err) {
                        console.log("error response or timeout exceeded" + err.error);
                    }
                    if (reply) {
                        cb.setToken(reply.oauth_token, reply.oauth_token_secret);
                    }

                    // if you need to persist the login after page reload,
                    // consider storing the token in a cookie or HTML5 local storage
                    window.localStorage.setItem("accessToken", reply.oauth_token);
                    window.localStorage.setItem("tokenSecret", reply.oauth_token_secret);
                }
            );
        }

}

function sendTweet(){
        var oauthtok = window.localStorage.setItem("accessToken");
        navigator.notification.alert(
            '+oauthtok+',  // message
            'Tweeting',            // title
            'Done'                  // buttonName
        ); 

        cb.setToken(reply.oauth_token, reply.oauth_token_secret);
        var param = {"status": $('#tweet').val()};                                

        navigator.notification.alert(
            'Tweeted',  // message
            'Tweeted',            // title
            'Done'                  // buttonName
        ); 
                        cb.__call(
                            "statuses_update", param,
                            function (reply, rate, err) {
                                // ...
                            }
                        );

        navigator.notification.alert(
            'Tweet Sent',  // message
            'Tweetsent',            // title
            'Done'                  // buttonName
        ); 

}

                    
                </script>
                <!--Code for Twitter ends here-->

</head>

    <body>

        <div data-role="page">

            <nd2-include data-src="panel.left.html"></nd2-include>


            <div data-role="header" data-position="fixed" class="wow fadeIn">
                <a href="#leftpanel" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.8s'></a>
                <h1 class="wow fadeIn" data-wow-delay='0.4s'>SocMan</h1>
            </div>


            <div role="main" class="ui-content wow fadeIn" data-wow-delay="0.2s"  data-inset="false">

            <div class="row center-xs">
                <div class="col-xs-12">
                    <div class="box">
                        <textarea cols="40" rows="8" name="textarea2" id="textarea2b" style="height: 100px !important;" placeholder="What's happening...?"></textarea>
                    </div>
                    <div class="box">
                    <button class="ui-btn ui-btn-inline ui-btn-fab ui-btn-raised clr-primary waves-effect waves-button waves-effect waves-button">
                    <i class="zmdi zmdi-twitter zmdi-hc-3x"></i>
                    </button>
                    </div>                  
                </div>


        <h4>Oodles Twitter App</h4>
         
            <table border="1">
                <tr>
                    <th>Login using Twitter</th>
                    <th>
                        <button id="loginBtn" onclick="login()">Login</button>
                        <button id="logoutBtn" onclick="logOut();">Logout</button>
                    </th>
                </tr>
                <tr id="tweetText">
                    <td colspan="2"><textarea id="tweet"></textarea></td>
                </tr>
                <tr id="tweetBtn">
                    <td colspan="2" align="right">
                        <button id="tweeter" onclick="sendTweet();">Tweet</button>
                    </td>
                </tr>
                <tr><td colspan="2"><div id="welcome">Please Login to use this app</div></td></tr>
            </table>

            </div>

            </div>

        </div>
 
    <script type="text/javascript">
        app.initialize();
    </script>
</body>

</html>